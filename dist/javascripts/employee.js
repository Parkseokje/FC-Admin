"use strict";window.requirejs(["common"],function(t){function e(){if(0===document.getElementById("exampleInputFile").files.length)return a("#exampleInputFile").focus(),window.alert("파일을 선택하세요."),!1;if(!window.confirm("파일을 업로드하시겠습니까?"))return!1;n.prop("disabled",!0);var t=new window.FormData;t.append("file",document.getElementById("exampleInputFile").files[0]),window.axios.post("/upload/excel/create/employee",t).then(function(t){t.data&&(n.prop("disabled",!1),!1!==t.data.success?window.alert("업로드 완료"):(window.alert("업로드에 실패하였습니다.\n핸드폰번호 또는 이메일 중복여부를 확인하세요."),console.log(t.data.message)))}).catch(function(t){console.log(t)})}var a=a||window.$,n=a("#js--btn-upload-employee-excel");a(function(){a("#createEmployee #select_branch").select2(),a("#modifyEmployee #select_branch").select2()}),n.on("click",function(t){t.preventDefault(),e()}),t.initDataTable(a("#table-branch"),{buttons:[]}),t.initDataTable(a("#table-employee"),{buttons:[{text:'<i class="fa fa-copy"></i> 복사',extend:"copy",className:"btn-sm btn-default",exportOptions:{columns:[0,1,2,3,4]}},{text:'<i class="fa fa-download"></i> 엑셀',extend:"excel",className:"btn-sm btn-default",exportOptions:{columns:[0,1,2,3,4]}}]});var i=a(".branch-right-buttons > #clear-input"),l=a(".branch-right-buttons > .btn-submit"),o=a("#frm_create_branch"),c=a("#btnDisableBranch"),r=a(".duty-list > a"),d=a(".duty-right-buttons > #clear-input"),u=a(".duty-right-buttons > .btn-submit"),s=a("#frm_create_duty"),m=a("#btnDisableDuty");a("#table-employee").on("click",".btn-modify-userinfo",function(t){var e=a(this),n=e.attr("data-user-name"),i=e.attr("data-user-branch"),l=e.attr("data-user-duty"),o=e.attr("data-user-phone"),c=e.attr("data-user-email"),r=e.attr("data-user-id"),d=a("#frm_modify_employee");d.find("#name").val(n),d.find("#tel").val(o),d.find("#email").val(c),d.find(".employee_id").val(r),d.find("#select_branch").val(i).trigger("change"),d.find("#select_duty").val(l)}),a("#table-branch").on("click",".branch-list-item",function(t){t.preventDefault(),a(".branch-input > input[name='id']").val(a(this).data("id")),a(".branch-input > input[name='name']").val(a(this).data("name")),o.attr("action","/employee/modify/branch"),l.html("수정"),c.prop("disabled",!1)}),i.bind("click",function(){a(".branch-input > input[name='id']").val(""),a(".branch-input > input[name='name']").val(""),o.attr("action","/employee/create/branch"),l.html("등록"),c.prop("disabled",!0)}),r.bind("click",function(t){t.preventDefault(),a(".duty-input > input[name='id'").val(a(this).data("id")),a(".duty-input > input[name='name']").val(a(this).data("name")),s.attr("action","/employee/modify/duty"),u.html("수정"),m.prop("disabled",!1)}),d.bind("click",function(){a(".duty-input > input[name='id']").val(""),a(".duty-input > input[name='name']").val(""),s.attr("action","/employee/create/duty"),u.html("등록"),m.prop("disabled",!0)}),a("#table-employee").on("click",".btn-delete-employee",function(){if(!confirm("삭제 시 되돌릴 수 없습니다. 정말 삭제하시겠습니까?"))return!1;var t={id:a(this).data("user-id")};axios.delete("/employee",{params:t}).then(function(t){t.data.success?alert("직원을 삭제하였습니다."):alert("직원을 삭제하지 못했습니다."),location.reload()}).catch(function(t){console.log(t)})}),c.bind("click",function(){if(!confirm("삭제 시 되돌릴 수 없습니다. 정말 삭제하시겠습니까?"))return!1;var t={id:a(".branch-input > input[name='id'").val()};axios.delete("/employee/branch",{params:t}).then(function(t){t.data.success?alert("점포을 삭제하였습니다."):alert("점포을 삭제하지 못했습니다."),location.reload()}).catch(function(t){console.log(t)})}),m.bind("click",function(){if(!confirm("삭제 시 되돌릴 수 없습니다. 정말 삭제하시겠습니까?"))return!1;var t={id:a(".duty-input > input[name='id'").val()};axios.delete("/employee/duty",{params:t}).then(function(t){t.data.success?alert("직책을 삭제하였습니다."):alert("직책을 삭제하지 못했습니다."),location.reload()}).catch(function(t){console.log(t)})})});
//# sourceMappingURL=../maps/employee.js.map
