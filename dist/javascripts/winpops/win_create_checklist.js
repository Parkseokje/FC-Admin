"use strict";window.requirejs(["common"],function(i){var t=window.$("#table_checklist"),n=window.$("#regist-quiz"),e=e||window.$;window.$(function(){t.find("tr:first-child").not("thead tr").find('input[name="item"]').focus(),t.find("tbody").sortable({items:"tr:not(:first)",placeholder:"sort-highlight",handle:".handle",forcePlaceholderSize:!0,zIndex:999999,start:function(i,t){window.$(this).attr("data-previndex",t.item.index())},update:function(i,t){window.$(this).removeAttr("data-previndex"),o()}})}),t.on("click",".additem",function(i){var n=window.$(this).closest(".item"),e=n.find('input[name="category"]'),o=n.find('input[name="item"]'),d=n.find(".itemtype"),r=n.find(".sample");if("write"!==d.val()&&""===e.val())return window.alert("분류를 입력하세요."),e.focus(),!1;if(""===o.val())return window.alert("체크사항을 입력하세요."),o.focus(),!1;var a=n.clone();a.find(".itemno").html(t.find("tr").not(":first").length),a.find("#item").attr("placeholder",""),a.find(".itemtype").val(d.val()),a.find(".additem").hide(),a.find(".removeitem").show(),t.find("tbody").find("tr:last").after(a),e.show(),r.show(),o.val(""),o.focus()}),t.on("click",".removeitem",function(){var i=window.$(this).closest(".item");window.confirm("삭제하시겠습니까?")&&i.remove()}),t.on("change",".itemtype",function(i){var t=window.$(this).closest(".item"),n=window.$(this),e=t.find('input[name="item"]'),o=t.find('input[name="category"]'),d=t.find(".sample");switch(n.val()){case"write":o.hide(),d.hide();break;default:o.show(),d.show()}e.select()}),t.on("keypress",".inputitem",function(i){if(13===i.which){var t=window.$(this).parent().closest(".item");0===t.index()&&t.find(".additem").click()}}),n.on("click",function(){var i=[],n=t.find("tr").not(":first"),o=window.$("input[name=title]");e("#desc").val();if(""===o.val().trim())return window.alert("대표제목을 입력하세요."),o.focus(),!1;n.each(function(t,n){if(0===t)return!0;var e=window.$(n),o=e.data("id"),d=e.find(".itemtype"),r=e.find('input[name="item"]'),a=e.find('input[name="category"]'),c=e.find('input[name="sample"]');return""===r.val()?(window.alert("체크사항을 입력하세요."),r.focus(),!1):"select"!==d.val()&&"choose"!==d.val()||""!==c.val()?void i.push({id:o,item_name:r.val(),item_type:d.val(),item_section:function(){return"write"!==d.val()?a.val():""}(),sample:function(){return"write"!==d.val()?c.val():""}(),order:t}):(window.alert("보기를 입력하세요."),c.focus(),!1)}),window.axios.post("/course/checklist",{course_id:window.$("input[name=course_id]").val(),course_list_id:null,checklist_group_id:null,order:null,title:window.$("input[name=title]").val(),desc:window.tinymce.get("desc").getContent({format:"raw"}),data:i}).then(function(i){window.alert("자료를 입력하였습니다."),d()}).catch(function(i){console.error(i)})});var o=function(){t.find("tr").not(":first").each(function(i,t){if(0===i)return!0;window.$(t).find(".itemno").html(i)})},d=function(){window.parent.opener.winpop_listener(!0),window.close()}});
//# sourceMappingURL=../../maps/winpops/win_create_checklist.js.map
