"use strict";window.requirejs(["common"],function(i){var t=window.$("#table_checklist"),e=window.$("#regist-quiz"),n=n||window.$;window.$(function(){t.find("tr:first-child").not("thead tr").find('input[name="item"]').focus(),t.find("tbody").sortable({items:"tr:not(:first)",placeholder:"sort-highlight",handle:".handle",forcePlaceholderSize:!0,zIndex:999999,start:function(i,t){window.$(this).attr("data-previndex",t.item.index())},update:function(i,t){window.$(this).removeAttr("data-previndex"),o()}})}),t.on("click",".additem",function(i){var e=window.$(this).closest(".item"),n=e.find('input[name="category"]'),o=e.find('input[name="item"]'),d=e.find(".itemtype"),a=e.find(".sample");if("write"!==d.val()&&""===n.val())return window.alert("분류를 입력하세요."),n.focus(),!1;if(""===o.val())return window.alert("체크사항을 입력하세요."),o.focus(),!1;var r=e.clone();r.find(".itemno").html(t.find("tr").not(":first").length),r.find("#item").attr("placeholder",""),r.find(".itemtype").val(d.val()),r.find(".additem").hide(),r.find(".removeitem").show(),t.find("tbody").find("tr:last").after(r),d.val("select"),n.show(),a.show(),o.val(""),o.focus()}),t.on("click",".removeitem",function(){var i=window.$(this).closest(".item");window.confirm("삭제하시겠습니까?")&&window.axios.delete("/course/checklist",{params:{checklist_group_id:window.$("input[name=checklist_group_id]").val(),checklist_id:i.data("id")}}).then(function(t){window.alert("체크리스트를 삭제하였습니다."),i.remove(),o()}).catch(function(i){console.error(i)})}),t.on("change",".itemtype",function(i){var t=window.$(this).closest(".item"),e=window.$(this),n=t.find('input[name="item"]'),o=t.find('input[name="category"]'),d=t.find(".sample");switch(e.val()){case"write":o.hide(),d.hide();break;default:o.show(),d.show()}n.select()}),t.on("keypress",".inputitem",function(i){if(13===i.which){var t=window.$(this).parent().closest(".item");0===t.index()&&t.find(".additem").click()}}),e.on("click",function(){var i=[],e=t.find("tr").not(":first"),o=window.$("input[name=title]");n("#desc").val();if(""===o.val().trim())return window.alert("대표제목을 입력하세요."),o.focus(),!1;e.each(function(t,e){if(0===t)return!0;var n=window.$(e),o=n.data("id"),d=n.find(".itemtype"),a=n.find('input[name="item"]'),r=n.find('input[name="category"]'),c=n.find('input[name="sample"]');return""===a.val()?(window.alert("체크사항을 입력하세요."),a.focus(),!1):"select"!==d.val()&&"choose"!==d.val()||""!==c.val()?void i.push({id:o,item_name:a.val(),item_type:d.val(),item_section:function(){return"write"!==d.val()?r.val():""}(),sample:function(){return"write"!==d.val()?c.val():""}(),order:t}):(window.alert("보기를 입력하세요."),c.focus(),!1)}),window.axios.post("/course/checklist",{course_id:window.$("input[name=course_id]").val(),course_list_id:window.$("input[name=course_list_id]").val(),checklist_group_id:window.$("input[name=checklist_group_id]").val(),title:window.$("input[name=title]").val(),desc:window.tinymce.get("desc").getContent({format:"raw"}),data:i}).then(function(i){window.alert("자료를 수정하였습니다."),d()}).catch(function(i){console.error(i)})});var o=function(){t.find("tr").not(":first").each(function(i,t){if(0===i)return!0;window.$(t).find(".itemno").html(i)})},d=function(){window.parent.opener.winpop_listener(!0),window.close()}});
//# sourceMappingURL=../../maps/winpops/win_modify_checklist.js.map
