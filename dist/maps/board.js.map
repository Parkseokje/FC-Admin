{"version":3,"sources":["board.js"],"names":["window","requirejs","$","$fileUpload","Util","initDataTable","fileSize","get","this","files","size","alert","val","event","currentTarget","$modal","title","$self","contents","filename","attr","find","tinymce","setContent","id","key","substring","lastIndexOf","text","html","prepend","confirm","response","data","success","location","reload","console","log","catch","error"],"mappings":"YAAAA,QAAOC,WACL,UAGA,SAAQC,EAAKF,GACb,GAAIG,GAAAA,GAAAA,OAAgBD,EAAhBC,EAAcD,EAAE,QAGlBA,GAAA,WADFE,EAAAC,cAAAH,EAAA,mBAMEC,EAAIG,GAAAA,SAAmBC,WACnBD,EAAYE,MAAID,IAAO,GAAAE,MAAM,GAAAC,MAClB,UACbR,OAAAS,MAAY,0BACbT,EAAAM,MAAAI,IAAA,OAKDV,EAAA,eAAgBW,KAAMC,QAAAA,SAAAA,GACtB,GAAMC,GAASf,EAAAA,EAASc,eAAlBC,EAASf,OAAOE,EAAE,gBAGlBc,EAAAA,EAAQC,KAAA,WACRC,EAAAA,EAAWD,KAAA,cACXE,EAAWF,EAAMG,KAAK,iBAAtBD,EAAWF,EAAMG,KAAK,gBAS1B,IANFL,EAAAM,KAAA,UAAAT,IAAAI,GAEAhB,OAAOsB,QAAQf,aAAIgB,WAAYA,IAC/BR,OAAOM,QAAKd,IAAA,YAAZgB,WAAAL,GAAAH,EAAOM,KAAK,aAAaT,IAAIY,GAG3BL,EAAYA,CAAZ,GAAMM,GAAMN,EAASO,UAAUP,EAASQ,YAAY,KAAO,EAG3DZ,GAAOM,KAAK,aAAaO,KAAKH,OAA9BV,2BAAAU,GACDV,EAAAM,KAAA,aAAAO,KAAAH,MAKDvB,EAAA,mBAAgBW,KAAMC,QAAR,SAAdD,GACA,GAAME,GAASf,EAAAA,EAASc,eAAlBC,EAASf,OAAOE,EAAE,qBAGlBgB,EAAAA,EAAWD,KAAA,cACXE,EAAWF,EAAMG,KAAK,iBAAtBD,EAAWF,EAAMG,KAAK,gBAK1B,IAHFL,EAAOM,KAAK,gBAAgBQ,KAAKb,GAG/BG,EAAYA,CAAZ,GAAMM,GAAMN,EAASO,UAAUP,EAASQ,YAAY,KAAO,EAG3DZ,GAAOM,KAAK,eAAeS,KAAAA,qCAA3Bf,EAAOM,KAAK,eAAeS,QAAQZ,GAGnCH,EAAOM,KAAK,aAAaO,KAAKH,OAA9BV,2BAAAU,GAPFV,EAQOM,KAAA,aAAAO,KAAAH,OAENV,GAAAM,KAAA,eAAAQ,KAAAX,KAKDhB,EAAA,eAAY6B,KAAQ,QAAA,SAAAlB,GAClB,IAAAb,OAAO+B,QAAP,iCACD,OAAA,CAGD,IAAMP,GAAKP,EAAMG,EAAKN,eAAhBU,EAAKP,EAAMG,KAAK,UAIlBpB,QAAKgC,MAAAA,OAAL,UAA4BR,GAC1BxB,KAAAA,SAAagC,GACRA,EAAAC,KAAAC,QAGPlC,OAAOmC,MAASC,YAFdpC,OAAOW,MAAM,eAKf0B,OAAQC,SAARF,WAlBNG,MAAA,SAAAC,GArEFH,QAAAC,IAAAE","file":"board.js","sourcesContent":["window.requirejs([\n  'common'\n],\nfunction (Util, AquaPlayerService) {\n  var $ = $ || window.$;\n  var $fileUpload = $('.file');\n\n  $(function () {\n    // datatable 설정\n    Util.initDataTable($('#table-board'));\n  });\n\n  $fileUpload.on('change', function () {\n    var fileSize = $(this).get(0).files[0].size;\n    if (fileSize >= 2 * 1024 * 1024) {\n      window.alert('2MB 이하의 파일만 업로드 가능합니다.');\n      $(this).val('');\n    }\n  });\n\n  // 정보 수정\n  $('.btn-modify').bind('click', (event) => {\n    const $self = $(event.currentTarget);\n    const $modal = window.$('#updateBoard');\n\n    const id = $self.attr('data-id');\n    const title = $self.attr('data-title');\n    const contents = $self.attr('data-contents');\n    const filename = $self.attr('data-filename');\n\n    $modal.find('#title').val(title);\n    // modal.find('#contents').val(contents);\n    window.tinymce.activeEditor.setContent('');\n    window.tinymce.get('contents').setContent(contents);\n    $modal.find('#board_id').val(id);\n\n    if (filename) {\n      const key = filename.substring(filename.lastIndexOf('/') + 1);\n\n      $modal.find('#filename').attr('href', `/api/v1/s3-download?key=${key}`);\n      $modal.find('#filename').text(key);\n    }\n  });\n\n  // 정보 보기\n  $('.show-board > a').bind('click', (event) => {\n    const $self = $(event.currentTarget);\n    const $modal = window.$('#modal-show-board');\n\n    const title = $self.attr('data-title');\n    const contents = $self.attr('data-contents');\n    const filename = $self.attr('data-filename');\n\n    $modal.find('.modal-title').html(title);\n\n    if (filename) {\n      const key = filename.substring(filename.lastIndexOf('/') + 1);\n\n      $modal.find('.modal-body').html('<br><a id=\"filename\" href=\"\"></a>');\n      $modal.find('.modal-body').prepend(contents);\n\n      $modal.find('#filename').attr('href', `/api/v1/s3-download?key=${key}`);\n      $modal.find('#filename').text(key);\n    } else {\n      $modal.find('.modal-body').html(contents);\n    }\n  });\n\n  // 정보 삭제\n  $('.btn-delete').bind('click', (event) => {\n    if (!window.confirm('삭제 시 되돌릴 수 없습니다. 정말 삭제하시겠습니까?')) {\n      return false;\n    }\n\n    const $self = $(event.currentTarget);\n    const id = $self.attr('data-id');\n\n    window.axios.delete(`/board/${id}`)\n      .then(function (response) {\n        if (!response.data.success) {\n          window.alert('삭제하지 못했습니다.');\n        } else {\n          window.alert('삭제하였습니다.');\n        }\n        window.location.reload();\n      })\n      .catch(function (error) {\n        console.log(error);\n      });\n  });\n});\n"],"sourceRoot":"/source/"}