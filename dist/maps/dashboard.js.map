{"version":3,"sources":["dashboard.js"],"names":["requirejs","Util","$","window","initDataTable","columns","className","data","buttons","text","extend","exportOptions","order","table","eduId","get","params","change","DataTable","console","error","clear","draw","this","val","axios","edu_id","user_id","e","newData","response","list","element","period","adjust","catch","index","on","relatedTarget","then","html","days","length","edu_name","edu_start_dt","edu_end_dt","pointSum","append","speed","user_period","complete","complete_course_count","total_course_count","quiz_correction","correct_count","total_count","final_correction","undefined","reeltime","video_watch_count","video_count","edu_period","repetition","value","point_complete","point_quiz","point_final","point_reeltime","refresh_count","point_speed","point_repetition","toFixed"],"mappings":"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","file":"dashboard.js","sourcesContent":["/**\n * Created by yijaejun on 30/11/2016.\n */\n\"use strict\";\nrequirejs(\n  [\n    \"common\"\n  ],\nfunction (Util) {\n  var $ = $ || window.$;\n  $(function () {\n    // Util.test();\n\n    // datatable 설정\n    Util.initDataTable($(\"#table-point-by-edu\"), {\n      \"columns\": [\n        { \"data\": \"branch_name\", className: \"center\" },\n        { \"data\": \"duty_name\", className: \"center\" },\n        { \"data\": \"user_name\", className: \"center\" },\n        { \"data\": \"period\", className: \"center\" },\n        { \"data\": \"complete\", className: \"center\" },\n        { \"data\": \"quiz_correction\", className: \"center\" },\n        { \"data\": \"final_correction\", className: \"center\" },\n        { \"data\": \"reeltime\", className: \"center\" },\n        { \"data\": \"speed\", className: \"center\" },\n        { \"data\": \"repetition\", className: \"center\" },\n        { \"data\": \"point_total\", className: \"right\" }\n      ],\n      \"order\": [[ 10, \"desc\" ]]\n    });\n    // 누적 포인트 현황\n    Util.initDataTable($(\"#table_point\"), {\n      \"order\": [[ 3, \"desc\" ]],\n      buttons: [\n        {\n          text: \"<i class=\\\"fa fa-copy\\\"></i> 복사\",\n          extend: \"copy\",\n          className: \"btn-sm btn-default\",\n          exportOptions: {\n            columns: [ 0, 1, 2, 3 ]\n          }\n        },\n        {\n          text: \"<i class=\\\"fa fa-download\\\"></i> 엑셀\",\n          extend: \"excel\",\n          className: \"btn-sm btn-default\",\n          exportOptions: {\n            columns: [ 0, 1, 2, 3 ]\n          }\n        }\n      ]\n    });\n  });\n\n  // 교육과정 선택 변경\n  $(\"#select-point-by-edu\").change(function () {\n    var table = $(\"#table-point-by-edu\").DataTable();\n\n    if ($(this).prop(\"selectedIndex\") === 0) {\n      table.clear().draw();\n      return false;\n    }\n    var eduId = $(this).val();\n\n    axios.get(\"/dashboard/edupoint\", {\n      params: {\n        edu_id: eduId\n      }\n    })\n    .then(function (response) {\n      var newData = response.data.data;\n      // var table = $('#table-point-by-edu').DataTable();\n\n      table.clear().draw();\n      table.rows.add(newData); // Add new data\n      table.columns.adjust().draw(); // Redraw the DataTable\n    })\n    .catch(function (error) {\n      console.error(error);\n    });\n  });\n\n  /**\n   * 포인트 상세내역 모달창\n   *\n   */\n  $(\"#modal-point-details\").on(\"show.bs.modal\", function (e) {\n    axios.get(\"/dashboard/point/details\", {\n      params: {\n        user_id: $(e.relatedTarget).data(\"user-id\")\n      }\n    })\n    .then(function (response) {\n      $(\"#table_point_details > tbody \").html(\"\");\n      var list = response.data.list;\n      var element = \"\";\n      var period;\n      var days;\n\n      for (var index = 0; index < list.length; index++) {\n        element = \"<tr>\";\n        element += \"<td>\" + list[index].edu_name + \"</td>\";\n\n        if (list[index].edu_start_dt === null) {\n          period = \"시작전\";\n        } else if (list[index].edu_end_dt === null) {\n          period = list[index].edu_start_dt + \" ~ \" + \"미완료\";\n        } else {\n          period = list[index].edu_start_dt + \" ~ \" + list[index].edu_end_dt;\n        }\n\n        days = list[index].speed.user_period === null ? 0 : list[index].speed.user_period;\n        element += \"<td class=\\\"center\\\">\" + period + \"</td>\";\n        // element += '<td class=\"center\">' + list[index].edu_start_dt + ' ~ ' + list[index].edu_end_dt + '</td>';\n        element += \"<td class=\\\"center\\\">\" + list[index].complete.complete_course_count + \" / \" + list[index].complete.total_course_count + \"</td>\";\n        element += \"<td class=\\\"center\\\">\" + list[index].quiz_correction.correct_count + \" / \" + list[index].quiz_correction.total_count + \"</td>\";\n        element += \"<td class=\\\"center\\\">\" + list[index].final_correction.correct_count + \" / \" + list[index].final_correction.total_count + \"</td>\";\n        element += \"<td class=\\\"center\\\">\" + (list[index].reeltime.video_watch_count === undefined ? \"0\" : list[index].reeltime.video_watch_count) + \" / \" +\n          (list[index].reeltime.video_count === undefined ? \"0\" : list[index].reeltime.video_count) + \"</td>\";\n        // element += '<td class=\"center\">' + list[index].reeltime.played_seconds + ' / ' + list[index].reeltime.duration + '</td>';\n        element += \"<td class=\\\"center\\\">\" + days + \" / \" + list[index].speed.edu_period + \"</td>\";\n        // element += '<td class=\"center\">' + list[index].speed.user_period + ' / ' + list[index].speed.edu_period + '</td>';\n        element += \"<td class=\\\"center\\\">\" + (list[index].repetition.value === 1 ? \"예\" : \"아니오\") + \"</td>\";\n\n        var pointSum =\n          list[index].complete.value * list[index].point_complete +\n          list[index].quiz_correction.value * list[index].point_quiz +\n          list[index].final_correction.value * list[index].point_final +\n          (list[index].reeltime.value * (list[index].point_reeltime - (list[index].reeltime.refresh_count === undefined ? 0 : list[index].reeltime.refresh_count))) +\n          // list[index].reeltime.value * list[index].point_reeltime +\n          list[index].speed.value * list[index].point_speed +\n          list[index].repetition.value * list[index].point_repetition;\n\n        element += \"<td class=\\\"center\\\">\" + pointSum.toFixed(2) + \"</td>\";\n        element += \"</tr>\";\n        $(\"#table_point_details > tbody \").append(element);\n      }\n    })\n    .catch(function (error) {\n      console.error(error);\n    });\n  });\n}); // end of func\n"],"sourceRoot":"/source/"}