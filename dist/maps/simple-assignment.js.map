{"version":3,"sources":["simple-assignment.js"],"names":["window","requirejs","Util","courseTemplate","sessionTemplate","selectedCourseId","$selectedPanel","get","$","val","session_list","newData","response","data","courses","length","sortable","start","DataTable","table","clear","draw","rows","add","columns","adjust","catch","error","console","setEmployeeIds","employeeIds","tableEmployee","each","this","append","join","pointTotal","update","parent","find","changeCourseOrder","disableSelection","text","getSessionList","refresh","prop","eduInfo","can_replay","undefined","sessionLoaded","axios","sumPoint","res","html","getCourseList","connectWith","modal","e","ui","attr","item","index","removeAttr","changeSessionOrder","err","log","empty","tableCheckAll","search","edu_course_list","getCourseView","tableCheckCourseAll","last","btnApplyEdu","preventDefault","tableEducations","$target","navListItems","closest","$item","allWells","eduId","education","activatedStep","name","activatedPanel","activeEditor","setContent","click","desc","point_complete","trigger","point_quiz","point_final","point_reeltime","activateStep","point_repetition","currSelector","parseInt","nextSelector","removeClass","id","tags","key","validateStep1","tagit","saveStep1Data","updateProgress","formData","step","currentTabId","post","assignmentId","then","FormData","document","getElementById","files","focus","alert","btnSaveSimpleAssign","success","validateStep2","logBindUserId","$eduName","message","pointIsValid","checked","getContent","format","complete_point","speed_point","reps_point","finish_dt","assigment_id","upload_employee_ids","edu_id","edu_tags","is_existed_edu","log_bind_user_id","can_advance","trainingEduId","input","confirm","params","delete","location","href","point","children","getSessionView","nodes","map","deleteSession","makeSessionOrderChangeRequest","promises","items","tinymce","execCommand","makeCourseOrderChangeRequest","method","url","course","all","start_dt","target","courseView","sessionView","session","title","course_list_id","on","course_list_order","courseId","createWindowPopup","spread","acct","perms","courselistType","push","checklist_group_id","$self","prev","$panelGroup","parents","dataCourseId","dataCourseListId","dataQuizGroupId","dataChecklistGroupId","addCourse","course_desc","teacher_name","$modal","courseListId","quizGroupId","updateCourse","course_id","videoId","course_rate","teacher_rate","replaceWith","remove","btnSendMessage","checkedEmployeeIds","end","course_name","_","modalAddCourses","tableCourse","initDataTable","lengthMenu","tableCourses","defaultContent","buttons","btnDeleteSimpleAssign","className","visible","messageInput","hide","beforeTagAdded","tagLabel","messageBytes","btnAttachCourses","remain","Handlebars","compile","windowOption","initDateTimePicker","event","checkedCourses","getBytes","row","getCoursesToAdd","course_ids","$btnChangeEduPeriod","numberToadd","startDt","moment","i","bind","hasClass","addClass","show","toString","quiz_point","test_point","reeltime_point","deleteAssignment","debounce","sum","submit","toggleIcon","phones","msg","onModifyCourseModalOpen","cutBytes","currentTarget","course_list_type","quiz_group_id","video_id","dataVideoId","dataType","dataTitle","trim"],"mappings":"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","file":"simple-assignment.js","sourcesContent":["\"use strict\";\n\nwindow.requirejs([\"common\", \"text!../course.template.html\", \"text!../session.template.html\"], function(\n  Util,\n  courseTemplate,\n  sessionTemplate\n) {\n  var $ = undefined || window.$;\n  var _ = undefined || window._;\n  var assignmentId = $(\"#assignment_id\").val();\n  var activatedStep = $(\"#activated_step\").val();\n  var navListItems = $(\"ul.setup-panel li a\");\n  var allWells = $(\".setup-content\");\n\n  var modalAddCourses = $(\"#addCourse\");\n\n  var tableCheckAll = $(\"#check-all\");\n  var tableCheckCourseAll = $(\"#js--formAddCourse\").find(\"#check-all\");\n  var tableCourse = Util.initDataTable($(\"#table_course\"));\n  var tableEmployee = Util.initDataTable($(\"#table_employee\"), {\n    lengthMenu: [\n      [5, 10, 25, 50, -1],\n      [5, 10, 25, 50, \"전체\"]\n    ]\n  });\n  var tableCourses = Util.initDataTable($(\"#js--formAddCourse\").find(\"#table_courses\"), {\n    columns: [\n      { data: null, defaultContent: \"<input type=\\\"checkbox\\\",value=\\\"\\\">\" },\n      { data: \"course_name\", className: \"center\" },\n      { data: \"teacher_name\", className: \"center\" },\n      { data: \"course_id\", className: \"center\", visible: false }\n    ],\n    lengthMenu: [\n      [5, 10, 25, 50, -1],\n      [5, 10, 25, 50, \"전체\"]\n    ],\n    buttons: []\n  });\n  var tableEducations = Util.initDataTable($(\"#js--formAddEdu\").find(\"#table_edu\"), {\n    lengthMenu: [\n      [5, 10, 25, 50, -1],\n      [5, 10, 25, 50, \"전체\"]\n    ],\n    buttons: []\n  });\n  var btnDeleteSimpleAssign = $(\"#js-delete-simple-assign\");\n  var btnSaveSimpleAssign = $(\"#js-save-simple-assign\");\n  var btnSendMessage = $(\".btn-send-message\");\n  var btnApplyEdu = $(\"#btnApplyEdu\");\n  var btnAttachCourses = $(\"#btnAttachCourses\");\n\n  var messageInput = $(\".message\");\n  var courseView = window.Handlebars.compile(courseTemplate);\n  var sessionView = window.Handlebars.compile(sessionTemplate);\n  var windowOption =\n    \"scrollbars=yes, toolbar=no, location=no, status=no, menubar=no, resizable=yes, width=1040, height=760, left=0, top=0\";\n\n  // Initialize\n  $(function() {\n    allWells.hide();\n\n    // window.tinymce.setActive('input-course-desc', true);\n    // window.tinymce.execCommand('mceFocus', false, 'input-course-desc');\n\n    $(\"#eduTags\").tagit({\n      beforeTagAdded: function(event, ui) {\n        var message = ui.tagLabel;\n        var messageBytes = Util.getBytes(message);\n        var remain = 20 - messageBytes;\n\n        if (remain < 0) {\n          console.log(remain, ui.tagLabel);\n          return false;\n        }\n      }\n    });\n\n    // DateTimePicker 설정\n    Util.initDateTimePicker($(\".date#start_dt\"), $(\".date#finish_dt\"));\n\n    modalAddCourses.on(\"show.bs.modal\", function(e) {\n      getCoursesToAdd();\n    });\n\n    btnAttachCourses.on(\"click\", function() {\n      var checkedCourses = $(\n        \":checkbox:checked\",\n        tableCourses\n          .rows\n          // {\n          //   filter: 'applied'\n          // }\n          ()\n          .nodes()\n      )\n        .map(function() {\n          return tableCourses.row(window.$(this).parents(\"tr\")).data()[\"course_id\"];\n        })\n        .get()\n        .join(\", \");\n\n      if (checkedCourses === \"\") {\n        window.alert(\"강의를 선택하세요.\");\n        return false;\n      }\n      if (!window.confirm(\"강의를 추가하시겠습니까?\")) return false;\n\n      btnAttachCourses.prop(\"disabled\", true);\n\n      window.axios\n        .post(\"/simple_assignment/courses\", {\n          edu_id: $(\"#edu_id\").val(),\n          course_ids: checkedCourses\n        })\n        .then(function(res) {\n          if (res.data) {\n            btnAttachCourses.prop(\"disabled\", false);\n            if (res.data.success !== false) {\n              window.alert(\"강의를 추가하였습니다.\");\n\n              // 강의목록 새로고침\n              getCourseList();\n\n              // 모달창 종료\n              $(\"#addCourse\").modal(\"hide\");\n            } else {\n              window.alert(\"강의를 추가하지 못하였습니다.\");\n              console.log(res.data.message);\n            }\n          }\n        });\n    });\n\n    $(\".education-period\").click(function() {\n      var $btnChangeEduPeriod = $(this);\n      var startDt = $(\"input[name='start_dt']\").val();\n      var numberToadd = $(\"#education-add-number\").val();\n\n      if (numberToadd === \"\") return false;\n\n      switch ($btnChangeEduPeriod.data(\"period\")) {\n      case \"hour\":\n        $(\"input[name='finish_dt']\").val(\n            window\n              .moment(startDt)\n              .add(numberToadd, \"h\")\n              .format(\"YYYY-MM-DD HH:mm\")\n          );\n        break;\n      case \"day\":\n        $(\"input[name='finish_dt']\").val(\n            window\n              .moment(startDt)\n              .add(numberToadd, \"d\")\n              .format(\"YYYY-MM-DD HH:mm\")\n          );\n        break;\n      case \"week\":\n        $(\"input[name='finish_dt']\").val(\n            window\n              .moment(startDt)\n              .add(numberToadd, \"w\")\n              .format(\"YYYY-MM-DD HH:mm\")\n          );\n        break;\n      case \"month\":\n        $(\"input[name='finish_dt']\").val(\n            window\n              .moment(startDt)\n              .add(numberToadd, \"M\")\n              .format(\"YYYY-MM-DD HH:mm\")\n          );\n        break;\n      case \"year\":\n        $(\"input[name='finish_dt']\").val(\n            window\n              .moment(startDt)\n              .add(numberToadd, \"y\")\n              .format(\"YYYY-MM-DD HH:mm\")\n          );\n        break;\n\n      default:\n        break;\n      }\n    });\n\n    $(\"#deselect-point-items\").click(function() {\n      if (!window.confirm(\"점수를 초기화하시겠습니까?\")) return false;\n      $(\".point-item\").each(function() {\n        $(this)\n          .parent()\n          .find(\".input-group-addon\")\n          .children(\"input:checkbox\")\n          .prop(\"checked\", false);\n        $(this).val(0);\n        $(this).prop(\"disabled\", true);\n      });\n      sumPoint();\n    });\n\n    $(\"#select-point-items\").click(function() {\n      $(\".point-item\").each(function() {\n        $(this)\n          .parent()\n          .find(\".input-group-addon\")\n          .children(\"input:checkbox\")\n          .prop(\"checked\", true);\n        // $(this).val(0);\n        $(this).prop(\"disabled\", false);\n      });\n      sumPoint();\n    });\n\n    $(\"ul.setup-panel li\").map(function() {\n      let $item = $(this);\n\n      for (var i = 2; i <= activatedStep; i++) {\n        if (i === $item.index() + 1) {\n          activateStep(i);\n        }\n      }\n    });\n\n    if ($(\"#edu_id\").val()) {\n      getCourseList();\n      $(\"#btnGetEdu\").prop(\"disabled\", true);\n    }\n\n    // 교육대상자 id 조회\n    setEmployeeIds();\n\n    // 포인트 합계 계산\n    sumPoint();\n  });\n\n  // 간편배정 시 추가할 강의목록 (현재 매칭된 교육과정 외 강의목록을 불러온다.)\n  function getCoursesToAdd() {\n    window.axios\n      .get(\"/simple_assignment/courses\", {\n        params: {\n          edu_id: $(\"#edu_id\").val()\n        }\n      })\n      .then(function(response) {\n        var newData = response.data.courses;\n        // console.log(newData);\n\n        if (newData.length > 0) {\n          // btnSaveAdminOffices.prop('disabled', false);\n          var table = $(\"#js--formAddCourse\")\n            .find(\"#table_courses\")\n            .DataTable();\n\n          table.clear().draw();\n          table.rows.add(newData);\n          table.columns.adjust().draw();\n        } else {\n          // btnSaveOfficeBranches.prop('disabled', true);\n        }\n      })\n      .catch(function(error) {\n        console.error(error);\n      });\n  }\n\n  // 교육대상자 id 조회\n  function setEmployeeIds() {\n    var employeeIds = $(\n      \":checkbox:checked\",\n      tableEmployee\n        .rows\n        // {\n        //   filter: 'applied'\n        // }\n        ()\n        .nodes()\n    )\n      .map(function() {\n        return $(this).data(\"id\");\n      })\n      .get()\n      .join(\", \");\n    $(\"input[name='upload_employee_ids']\").val(employeeIds);\n  }\n\n  function sumPoint() {\n    var pointTotal = 0;\n    $(\".point-item\").each(function() {\n      var checked = $(this)\n        .parent()\n        .find(\".input-group-addon\")\n        .children(\"input:checkbox\")\n        .prop(\"checked\");\n      if (checked && $(this).val() !== \"\") {\n        pointTotal += parseInt($(this).val());\n      }\n    });\n\n    $(\".badge\").text(pointTotal);\n    return pointTotal;\n  }\n\n  /**\n   * 윈도우 팝업창에서의 저장 작업 완료 시 호출된다.\n   * @data: 갱신여부를 반환한다. true 일 경우 세션정보를 갱신한다.\n   */\n  window.winpop_listener = function(data) {\n    getSessionList(data);\n  };\n\n  /**\n   * 세션목록 조회\n   * 처음 강의를 열었을 때와 세션정보가 변경되는 경우만 세션 정보를 갱신한다.\n   */\n  function getSessionList(refresh) {\n    var selectedCourseId = $(\".panel-group\").data(\"selected-course-id\");\n    var $selectedPanel = $(\".panel[data-id=\" + selectedCourseId + \"]\");\n\n    if ($selectedPanel.data(\"metadata\").sessionLoaded === undefined || refresh) {\n      window.axios\n        .get(\"/course/\" + selectedCourseId)\n        .then(function(res) {\n          if (res.data) {\n            $selectedPanel.find(\".session-content\").html(\n              getSessionView({\n                session_list: res.data.session_list\n              })\n            );\n            $selectedPanel.data(\"metadata\").sessionLoaded = true;\n\n            $(\".list-group\")\n              .sortable({\n                connectWith: \".list-group-item\",\n                start: function(e, ui) {\n                  $(this).attr(\"data-previndex\", ui.item.index());\n                },\n                update: function(e, ui) {\n                  // var newIndex = ui.item.index();\n                  // var oldIndex = window.$(this).attr('data-previndex');\n                  // window.console.log('newIndex : ' + newIndex + ' oldIndex : ' + oldIndex);\n                  $(this).removeAttr(\"data-previndex\");\n                  changeSessionOrder();\n                }\n              })\n              .disableSelection();\n          }\n        })\n        .catch(function(err) {\n          console.log(err);\n        });\n    }\n  }\n\n  /**\n   * 강의목록 조회\n   */\n  function getCourseList() {\n    var eduId = $(\"#edu_id\").val();\n\n    $(\"#course-list\").empty();\n\n    window.axios\n      .get(\"/education/\" + eduId + \"/courses\")\n      .then(function(res) {\n        if (res.data) {\n          $.each(res.data.edu_course_list, function(index, data) {\n            $(\"#course-list\").append(getCourseView(data));\n            $(\".panel\")\n              .last()\n              .data(\"metadata\", data);\n          });\n\n          $(\"#course-list\")\n            .sortable({\n              connectWith: \".panel\",\n              start: function(e, ui) {\n                $(this).attr(\"data-previndex\", ui.item.index());\n              },\n              update: function(e, ui) {\n                // var newIndex = ui.item.index();\n                // var oldIndex = window.$(this).attr('data-previndex');\n                // window.console.log('newIndex : ' + newIndex + ' oldIndex : ' + oldIndex);\n                $(this).removeAttr(\"data-previndex\");\n                changeCourseOrder();\n              }\n            })\n            .disableSelection();\n        }\n      })\n      .catch(function(err) {\n        console.log(err);\n      });\n  }\n\n  function getEduInfo(eduId) {\n    window.axios\n      .get(\"/education/\" + eduId + \"/pointweight\")\n      .then(function(res) {\n        if (res.data) {\n          const eduInfo = res.data.education[0];\n\n          $(\"input[name='course_name']\").val(eduInfo.name);\n          window.tinymce.activeEditor.setContent(\"\");\n          window.tinymce.get(\"input-course-desc\").setContent(eduInfo.desc);\n          $(\"input[name='complete_point']\").val(eduInfo.point_complete);\n          $(\"input[name='quiz_point']\").val(eduInfo.point_quiz);\n          $(\"input[name='test_point']\").val(eduInfo.point_final);\n          $(\"input[name='reeltime_point']\").val(eduInfo.point_reeltime);\n          $(\"input[name='reps_point']\").val(eduInfo.point_repetition);\n          $(\"input[name='speed_point']\").val(eduInfo.point_speed);\n          $(\"#can-replay\").prop(\"checked\", eduInfo.can_replay === 1);\n\n          $(\"#edu_id\").val(eduInfo.id);\n          $(\"#edu_id\").data(\"existed\", \"Y\");\n\n          // 포인트 합계 계산\n          sumPoint();\n\n          // 태그 입력\n          if (res.data.tags) {\n            for (var key in res.data.tags) {\n              $(\"#eduTags\").tagit(\"createTag\", res.data.tags[key].name);\n            }\n          }\n\n          // 강의 목록 조회\n          getCourseList();\n          // 모달창 종료\n          $(\"#addEdu\").modal(\"hide\");\n\n          // $(function () {\n          //   $('#js--formAddEdu').modal('hide');\n          // });\n\n          // 'name': $('input[name=\\'course_name\\']').val(),\n          // 'desc': window.tinymce.activeEditor.getContent({format: 'raw'}),\n          // 'complete_point': $('input[name=\\'complete_point\\']').val(),\n          // 'quiz_point': $('input[name=\\'quiz_point\\']').val(),\n          // 'test_point': $('input[name=\\'test_point\\']').val(),\n          // 'reeltime_point': $('input[name=\\'reeltime_point\\']').val(),\n          // 'speed_point': $('input[name=\\'speed_point\\']').val(),\n          // 'reps_point': $('input[name=\\'reps_point\\']').val(),\n          // 'start_dt': $('input[name=\\'start_dt\\']').val(),\n          // 'finish_dt': $('input[name=\\'finish_dt\\']').val(),\n          // 'assigment_id': assignmentId,\n          // 'upload_employee_ids': $('input[name=\\'upload_employee_ids\\']').val(),\n          // 'edu_id': $('#edu_id').val(),\n          // 'log_bind_user_id': $('#log_bind_user_id').val(),\n          // 'training_edu_id': $('#training_edu_id').val(),\n          // 'can_replay': $('#can-replay').prop('checked') ? 1 : 0\n        }\n      })\n      .catch(function(err) {\n        console.log(err);\n      });\n  }\n\n  tableCheckAll.bind(\"click\", function() {\n    $(\n      \":checkbox\",\n      tableEmployee\n        .rows({\n          search: \"applied\"\n        })\n        .nodes()\n    ).prop(\"checked\", this.checked);\n  });\n\n  tableCheckCourseAll.bind(\"click\", function() {\n    $(\n      \":checkbox\",\n      tableCourses\n        .rows({\n          search: \"applied\"\n        })\n        .nodes()\n    ).prop(\"checked\", this.checked);\n  });\n\n  btnApplyEdu.bind(\"click\", function(e) {\n    e.preventDefault();\n\n    var eduId = $(\n      \"input:first:checked\",\n      tableEducations\n        .rows({\n          search: \"applied\"\n        })\n        .nodes()\n    ).data(\"id\");\n    if (eduId !== undefined) {\n      if (window.confirm(\"적용하시겠습니까?\")) {\n        getEduInfo(eduId);\n      }\n    } else {\n      window.alert(\"교육과정을 선택하세요.\");\n    }\n  });\n\n  navListItems.click(function(e) {\n    e.preventDefault();\n    var $target = $($(this).attr(\"href\"));\n    var $item = $(this).closest(\"li\");\n\n    if (!$item.hasClass(\"disabled\")) {\n      navListItems.closest(\"li\").removeClass(\"active\");\n      $item.addClass(\"active\");\n      allWells.hide();\n      $target.show();\n    }\n  });\n\n  if (activatedStep > 1) {\n    var activatedPanel = \"ul.setup-panel li a:eq(\" + (activatedStep - 1).toString() + \")\";\n    $(activatedPanel).click();\n  } else {\n    $(\"ul.setup-panel li.active a\").trigger(\"click\");\n  }\n\n  function activateStep(step) {\n    var currSelector = \"ul.setup-panel li:eq(\" + (parseInt(step) - 1) + \")\";\n    var nextSelector = \"ul.setup-panel li a[href=\\\"#step-\" + step + \"\\\"]\";\n\n    $(currSelector).removeClass(\"disabled\");\n    $(nextSelector).trigger(\"click\");\n\n    // updateProgress(step);\n  }\n\n  // 1. 교육생 설정\n  $(\".step1 > .next > a\").on(\"click\", function(e) {\n    e.preventDefault();\n    if (validateStep1()) {\n      if ($(\"#edu_id\").val()) {\n        if (\n          !window.confirm(\n            \"엑셀 업로드 시 이전 배정내역은 모두 취소되며,\\n배정을 취소하는 경우 학습이력이 모두 초기화 됩니다.\\n그래도 계속 하시겠습니까?\"\n          )\n        )\n          return false;\n      } else {\n        if (!window.confirm(\"저장하시겠습니까?\")) return false;\n      }\n      activateStep(2);\n      saveStep1Data();\n    }\n  });\n  $(\".step2 > .previous > a\").on(\"click\", function(e) {\n    e.preventDefault();\n    activateStep(1);\n  });\n  // 2. 교육과정 개설\n  $(\".step2 > .next > a\").on(\"click\", function(e) {\n    e.preventDefault();\n    if (validateStep2()) {\n      if (!window.confirm(\"저장하시겠습니까?\")) return false;\n      saveStep2Data();\n      activateStep(3);\n    }\n  });\n  $(\".step3 > .previous > a\").on(\"click\", function(e) {\n    e.preventDefault();\n    activateStep(2);\n  });\n  // 3. 강의 개설\n  $(\".step3 > .next > a\").on(\"click\", function(e) {\n    e.preventDefault();\n    // activateStep(4);\n    updateProgress(4);\n  });\n  $(\".step4 > .previous > a\").on(\"click\", function(e) {\n    e.preventDefault();\n    activateStep(3);\n  });\n\n  $(\".panel-collapse\").on(\"hide.bs.collapse\", function() {\n    $(\".panel-collapse-clickable\")\n      .find(\"i\")\n      .removeClass(\"glyphicon-chevron-up\")\n      .addClass(\"glyphicon-chevron-down\");\n  });\n\n  $(\".panel-collapse\").on(\"show.bs.collapse\", function() {\n    $(\".panel-collapse-clickable\")\n      .find(\"i\")\n      .removeClass(\"glyphicon-chevron-down\")\n      .addClass(\"glyphicon-chevron-up\");\n  });\n\n  btnDeleteSimpleAssign.on(\"click\", deleteAssignment);\n  btnSaveSimpleAssign.on(\"click\", function() {\n    // updateProgress($('ul.setup-panel li.active').index() + 1);\n    var step = $(\"ul.setup-panel li.active\").index() + 1;\n\n    $(\".step\" + step + \" > .next > a\").trigger(\"click\");\n    // if (!window.confirm('저장하시겠습니까?')) return false;\n    // switch (step) {\n    // case 1:\n    //   if (validateStep1()) {\n    //     saveStep1Data();\n    //   }\n    //   break;\n    // case 2:\n    //   if (validateStep2()) {\n    //     saveStep2Data();\n    //   }\n    //   break;\n    // default:\n    //   break;\n    // }\n  });\n\n  function updateProgress(step) {\n    if (activatedStep === 4 && step === 4) {\n      activateStep(step);\n      return false;\n    }\n\n    window.axios\n      .post(\"/simple_assignment/progress\", {\n        step: step,\n        id: assignmentId\n      })\n      .then(function(response) {\n        activateStep(step);\n        return true;\n      })\n      .catch(function(error) {\n        console.log(error);\n        return false;\n      });\n  }\n\n  /**\n   * 교육 대상자를 저장한다.\n   */\n  function saveStep1Data() {\n    btnSaveSimpleAssign.prop(\"disabled\", true);\n\n    var formData = new window.FormData();\n    formData.append(\"upload_type\", $(\"input[name='upload_type']\").val());\n    formData.append(\"upload_employee_ids\", $(\"input[name='upload_employee_ids']\").val());\n    formData.append(\"file-excel\", document.getElementById(\"UploadExcelFile\").files[0]);\n    formData.append(\"group_name\", \"간편배정\");\n    formData.append(\"redirect\", false);\n    formData.append(\"id\", assignmentId);\n    formData.append(\"log_bind_user_id\", $(\"#log_bind_user_id\").val());\n    formData.append(\"edu_id\", $(\"#edu_id\").val());\n    formData.append(\"start_dt\", $(\"input[name='start_dt']\").val());\n    formData.append(\"finish_dt\", $(\"input[name='finish_dt']\").val());\n    formData.append(\"training_edu_id\", $(\"#training_edu_id\").val());\n\n    window.axios\n      .post(\"/assignment/upload\", formData)\n      .then(function(res) {\n        if (res.data) {\n          btnSaveSimpleAssign.prop(\"disabled\", false);\n\n          if (res.data.success !== false) {\n            $(\"#log_bind_user_id\").val(res.data.logBindUserId);\n            window.alert(\"교육생을 저장하였습니다.\");\n          } else {\n            window.alert(\"교육생을 저장하지 못하였습니다.\");\n            console.log(res.data.message);\n          }\n        }\n      })\n      .catch(function(error) {\n        console.log(error);\n      });\n  }\n\n  /**\n   * 교육과정 정보, 포인트 및 교육기간 정보를 저장한다.\n   */\n  function saveStep2Data() {\n    var data = {\n      name: $(\"input[name='course_name']\").val(),\n      desc: window.tinymce.get(\"input-course-desc\").getContent({\n        format: \"raw\"\n      }),\n      complete_point: $(\"input[name='complete_point']\").val(),\n      quiz_point: $(\"input[name='quiz_point']\").val(),\n      test_point: $(\"input[name='test_point']\").val(),\n      reeltime_point: $(\"input[name='reeltime_point']\").val(),\n      speed_point: $(\"input[name='speed_point']\").val(),\n      reps_point: $(\"input[name='reps_point']\").val(),\n      start_dt: $(\"input[name='start_dt']\").val(),\n      finish_dt: $(\"input[name='finish_dt']\").val(),\n      assigment_id: assignmentId,\n      upload_employee_ids: $(\"input[name='upload_employee_ids']\").val(),\n      edu_id: $(\"#edu_id\").val(),\n      edu_tags: $(\"#eduTags\").tagit(\"assignedTags\"),\n      is_existed_edu: $(\"#edu_id\").data(\"existed\"),\n      log_bind_user_id: $(\"#log_bind_user_id\").val(),\n      training_edu_id: $(\"#training_edu_id\").val(),\n      can_replay: $(\"#can-replay\").prop(\"checked\") ? 0 : 1,\n      can_advance: $(\"#can-advance\").prop(\"checked\") ? 0 : 1\n    };\n\n    // console.log(data);\n    // return false;\n\n    window.axios\n      .post(\"/education\", data)\n      .then(function(res) {\n        // console.log(res);\n        if (res.data) {\n          $(\"#training_edu_id\").val(res.data.trainingEduId);\n          $(\"#edu_id\").val(res.data.eduId);\n          window.alert(\"교육과정을 저장하였습니다.\");\n        }\n      })\n      .catch(function(err) {\n        console.log(err);\n      });\n  }\n\n  function deleteAssignment() {\n    if (!window.confirm(\"정말 삭제하시겠습니까?\")) return false;\n\n    var params = {\n      id: assignmentId,\n      log_bind_user_id: $(\"#log_bind_user_id\").val(),\n      edu_id: $(\"#edu_id\").val()\n    };\n\n    window.axios\n      .delete(\"/simple_assignment\", {\n        params: params\n      })\n      .then(function(response) {\n        if (!response.data.success) {\n          window.alert(\"배정내역을 삭제하지 못하였습니다.\");\n        } else {\n          window.alert(\"교육과정을 삭제하였습니다.\");\n          window.location.href = \"/simple_assignment\";\n        }\n      })\n      .catch(function(error) {\n        console.log(error);\n      });\n  }\n\n  /**\n   * 1. 교육 대상자 선택\n   */\n  function validateStep1() {\n    var currentTabId = $(\"ul.select-employee li.active\")\n      .children()\n      .attr(\"id\");\n    var data = null;\n\n    $(\"input[name='upload_type']\").val(currentTabId);\n\n    switch (currentTabId) {\n    case \"employee\": // 등록된 직원\n      data = $(\n          \":checkbox:checked\",\n          tableEmployee\n            .rows\n            // {\n            //   filter: 'applied'\n            // }\n            ()\n            .nodes()\n        )\n          .map(function() {\n            return $(this).data(\"id\");\n          })\n          .get()\n          .join(\", \");\n\n        // console.log('employee_ids:', data);\n\n      if (!data) {\n        window.alert(\"직원을 선택하세요.\");\n        return false;\n      }\n\n      $(\"input[name='upload_employee_ids']\").val(data);\n      break;\n\n    case \"excel\": // 파일업로드\n      if (document.getElementById(\"UploadExcelFile\").files.length === 0) {\n        $(\"#UploadExcelFile\").focus();\n        window.alert(\"파일을 선택하세요.\");\n        return false;\n      }\n      break;\n\n    default:\n      break;\n    }\n\n    return true;\n  }\n\n  /**\n   * 2. 교육과정 입력\n   */\n  function validateStep2() {\n    var $eduName = $(\"input[name='course_name']\");\n    var $eduDescription = $(\"#input-course-desc\").val(); // window.tinymce.activeEditor.getContent();\n\n    if ($eduName.val() === \"\") {\n      window.alert(\"교육과정명을 입력하세요.\");\n      $eduName.focus();\n      return false;\n    }\n\n    if ($eduDescription === \"\") {\n      window.alert(\"교육과정에 대한 설명을 입력하세요.\");\n      window.tinymce.execCommand(\"mceFocus\", false, \"input-course-desc\");\n      return false;\n    }\n\n    var pointIsValid = true;\n    var pointTotal = 0;\n    $(\".point-item\").each(function() {\n      var checked = $(this)\n        .parent()\n        .find(\".input-group-addon\")\n        .children(\"input:checkbox\")\n        .prop(\"checked\");\n      // console.log('$(this).val()', checked, $(this).val());\n      if (checked) {\n        if ($(this).val() === \"\") {\n          window.alert($(this).prop(\"placeholder\") + \" 포인트 점수를 입력하세요.\");\n          $(this).focus();\n          pointIsValid = false;\n          return false;\n        } else {\n          pointTotal += parseInt($(this).val());\n        }\n      }\n    });\n\n    // console.log('pointTotal', pointTotal, pointIsValid);\n    if (!pointIsValid) return false;\n    if (pointTotal !== 100) {\n      window.alert(\"포인트의 합계는 100점이 되어야 합니다.\");\n      return false;\n    }\n\n    var start_dt = $(\"input[name='start_dt']\").val();\n    var finish_dt = $(\"input[name='finish_dt']\").val();\n\n    if (!start_dt) {\n      window.alert(\"시작일자를 선택하세요.\");\n      $(\"input[name='start_dt']\").focus();\n      return false;\n    }\n\n    if (!finish_dt) {\n      window.alert(\"종료일자를 선택하세요.\");\n      $(\"input[name='finish_dt']\").focus();\n      return false;\n    }\n\n    return true;\n  }\n\n  $(\".input-group-addon\")\n    .children(\"input:checkbox\")\n    .on(\"change\", function() {\n      var input = $(this)\n        .parent()\n        .parent()\n        .find(\".point-item\");\n\n      input.prop(\"disabled\", !$(this).prop(\"checked\"));\n\n      if ($(this).prop(\"checked\")) {\n        input.focus();\n      }\n    });\n\n  $(\".point-item\").on(\n    \"keyup\",\n    _.debounce(function() {\n      var sum = 0;\n\n      $(\".point-item\").each(function() {\n        var checked = $(this)\n          .parent()\n          .find(\".input-group-addon\")\n          .children(\"input:checkbox\")\n          .prop(\"checked\");\n        if (checked && $(this).val() !== \"\" && $(this).val() !== \"0\") {\n          var point = parseInt($(this).val());\n          sum += point;\n        } else {\n          // $(this).prop('disabled', true);\n          // $(this).parent().find('.input-group-addon').children('input:checkbox').prop('checked', false);\n        }\n      });\n\n      if (sum > 0) {\n        $(\".badge\").text(sum);\n      }\n\n      if (sum > 100) {\n        window.alert(\"100점을 초과하였습니다.\");\n        return false;\n      }\n    }, 300)\n  );\n\n  function getCourseView(data) {\n    return courseView(data);\n  }\n\n  function getSessionView(data) {\n    return sessionView(data);\n  }\n\n  /**\n   * 세션관련정보를 삭제한다.\n   * 주의사항:\n   * 세션과 관련된 일체를 실제 삭제하는 기능이므로, 꼭 필요한 경우에만 사용하도록 할 필요가 있다.\n   * 1. 세션정보(course_list) 삭제\n   * 2. 퀴즈 보기(quiz_option) 삭제\n   * 3. 퀴즈(quiz) 를 삭제한다.\n   * 4. 퀴즈 보기 그룹(quiz_group) 삭제\n   */\n  function deleteSession(params) {\n    window.axios\n      .delete(\"/course/courselist\", {\n        params: params\n      })\n      .then(function(response) {\n        if (!response.data.success) {\n          window.alert(\"진행한 이력이 있어 세션을 삭제하지 못했습니다. 관리자에게 문의해주시기 바랍니다.\");\n        } else {\n          window.alert(\"세션을 삭제하였습니다.\");\n          window.location.reload();\n        }\n      })\n      .catch(function(error) {\n        console.log(error);\n      });\n  }\n\n  /**\n   * DB 에서 세션 순서를 변경한다.\n   */\n  function makeSessionOrderChangeRequest(session) {\n    return window.axios({\n      method: \"put\",\n      url: \"/course/courselist\",\n      data: {\n        title: session.children(\"a\").data(\"title\"),\n        course_list_id: session.children(\"a\").data(\"id\"),\n        course_list_order: session.index()\n      }\n    });\n  }\n\n  /**\n   * 세션순서를 변경한다.\n   */\n  function changeSessionOrder() {\n    var promises = [];\n    var items = window.$(\".session-content > .list-group-item\");\n\n    for (var index = 0; index < items.length; index++) {\n      promises.push(makeSessionOrderChangeRequest(window.$(items[index])));\n    }\n\n    window.axios.all(promises).then(\n      window.axios.spread(function(acct, perms) {\n        if (acct.data.success) {\n          window.alert(\"세션순서를 변경하였습니다.\");\n        }\n      })\n    );\n  }\n\n  /**\n   * DB 에서 강의 순서를 변경한다.\n   */\n  function makeCourseOrderChangeRequest(course) {\n    return window.axios({\n      method: \"put\",\n      url: \"/education/coursegroup\",\n      data: {\n        id: course.data(\"group-id\"), // course_group 의 id\n        order: course.index()\n      }\n    });\n  }\n\n  /**\n   * 강의순서를 변경한다.\n   */\n  function changeCourseOrder() {\n    var promises = [];\n    var items = $(\"#course-list > .panel\");\n\n    for (var index = 0; index < items.length; index++) {\n      promises.push(makeCourseOrderChangeRequest(window.$(items[index])));\n    }\n\n    window.axios.all(promises).then(\n      window.axios.spread(function(acct, perms) {\n        // console.log(acct);\n        // console.log(perms);\n        if (acct.data.success) {\n          window.alert(\"강의순서를 변경하였습니다.\");\n        }\n      })\n    );\n\n    // window.axios.all(promises).then(function (results) {\n    //   results.forEach(function (response) {\n    //     console.log(response);\n    //   });\n    // });\n  }\n\n  function toggleIcon(e) {\n    $(e.target)\n      .prev(\".panel-heading\")\n      .find(\".more-less\")\n      .toggleClass(\"glyphicon-plus glyphicon-minus\");\n\n    // panel-group 에 현재 편집중인 강의 id 를 입력한다.\n    var $panelGroup = $(e.target)\n      .parents()\n      .find(\".panel-group\");\n    var selectedCourseId = $(e.target)\n      .parents()\n      .closest(\".panel\")\n      .data(\"id\");\n\n    if ($panelGroup.data(\"selected-course-id\") !== selectedCourseId) {\n      $panelGroup.data(\"selected-course-id\", selectedCourseId);\n      getSessionList();\n    }\n  }\n\n  function addCourse() {\n    var $modal = $(\"#registerCourse\");\n    var data = {\n      course_name: $modal.find(\"input[name='course_name']\").val(),\n      course_desc: window.tinymce.activeEditor.getContent(),\n      teacher_name: $modal.find(\"input[name='teacher_name']\").val(),\n      edu_id: $(\"#edu_id\").val()\n    };\n\n    window.axios\n      .post(\"/course\", data)\n      .then(function(res) {\n        if (res.data) {\n          if ($(\"#course-list\").children().length === 0) {\n            var currSelector = \"ul.setup-panel li:eq(3)\"; // 4. 메세지\n            $(currSelector).removeClass(\"disabled\");\n            updateProgress(4);\n          }\n          $(\"#course-list\").append(getCourseView(res.data));\n          $(\".panel\")\n            .last()\n            .data(\"metadata\", res.data);\n        }\n      })\n      .catch(function(error) {\n        console.log(error);\n      });\n  }\n\n  function updateCourse() {\n    var $modal = $(\"#modifyCourse\");\n    var selectedCourseId = $(\".panel-group\").data(\"selected-course-id\");\n    var data = {\n      course_id: selectedCourseId,\n      course_name: $modal.find(\"input[name='course_name']\").val(),\n      course_desc: window.tinymce.activeEditor.getContent(),\n      teacher_name: $modal.find(\"input[name='teacher_name']\").val(),\n      course_rate: 0,\n      teacher_rate: 0\n    };\n\n    window.axios\n      .put(\"/course\", data)\n      .then(function(res) {\n        if (res.data) {\n          // console.log(res.data);\n          $(\".panel[data-id=\" + res.data.course_id + \"]\").replaceWith(getCourseView(res.data));\n          $(\".panel[data-id=\" + res.data.course_id + \"]\").data(\"metadata\", res.data);\n        }\n      })\n      .catch(function(error) {\n        console.log(error);\n      });\n  }\n\n  function onModifyCourseModalOpen(e) {\n    var data = $(e.relatedTarget)\n      .parents()\n      .closest(\".panel\")\n      .data(\"metadata\");\n    var $modal = $(this);\n\n    // console.log(data);\n\n    $modal\n      .find(\"input\")\n      .val(\"\")\n      .end();\n    window.tinymce.activeEditor.setContent(\"\");\n    $modal.find(\"input[name='course_name']\").val(data.course_name);\n    $modal.find(\"input[name='teacher_name']\").val(data.teacher_name);\n    window.tinymce.get(\"course_desc\").setContent(data.course_desc);\n    $modal.find(\"[autofocus]\").focus();\n  }\n\n  $(\"#registerCourse\").submit(function(e) {\n    e.preventDefault();\n\n    addCourse();\n\n    window.tinymce.execCommand(\"mceFocus\", false, \"course_desc\");\n    $(this).modal(\"toggle\");\n  });\n  $(\"#modifyCourse\").submit(function(e) {\n    e.preventDefault();\n\n    updateCourse();\n\n    window.tinymce.execCommand(\"mceFocus\", false, \"course_desc\");\n    $(this).modal(\"toggle\");\n  });\n\n  $(\".panel-group\").on(\"hidden.bs.collapse\", toggleIcon);\n  $(\".panel-group\").on(\"shown.bs.collapse\", toggleIcon);\n  $(\"#registerCourse\").on(\"hidden.bs.modal\", function() {\n    $(this)\n      .find(\"input\")\n      .val(\"\")\n      .end();\n    window.tinymce.activeEditor.setContent(\"\");\n  });\n  $(\"#registerCourse\").on(\"shown.bs.modal\", function() {\n    $(this)\n      .find(\"[autofocus]\")\n      .focus();\n  });\n  $(\"#modifyCourse\").on(\"shown.bs.modal\", onModifyCourseModalOpen);\n  // $('#modifyCourse').on('hidden.bs.modal', onModifyCourseModalClose);\n\n  // 비디오 생성하기\n  $(\".panel-group\").on(\"click\", \".btn-create-video\", function(e) {\n    e.preventDefault();\n    var courseId = $(this).attr(\"data-course-id\");\n    Util.createWindowPopup(\"/course/create/video?course_id=\" + courseId, \"Video\", windowOption);\n  });\n  // 퀴즈 생성하기\n  $(\".panel-group\").on(\"click\", \".btn-create-quiz\", function(e) {\n    e.preventDefault();\n\n    var courseId = $(this).attr(\"data-course-id\");\n    Util.createWindowPopup(\"/course/create/quiz?course_id=\" + courseId + \"&type=QUIZ\", \"Quiz\", windowOption);\n  });\n  // 파이널테스트 생성하기\n  $(\".panel-group\").on(\"click\", \".btn-create-final\", function(e) {\n    e.preventDefault();\n\n    var courseId = $(this).attr(\"data-course-id\");\n    Util.createWindowPopup(\"/course/create/quiz?course_id=\" + courseId + \"&type=FINAL\", \"Final\", windowOption);\n  });\n  // 파이널테스트 생성하기\n  $(\".panel-group\").on(\"click\", \".btn-create-checklist\", function(e) {\n    e.preventDefault();\n\n    var courseId = $(this).attr(\"data-course-id\");\n    Util.createWindowPopup(\"/course/create/checklist?course_id=\" + courseId + \"&type=CHECK\", \"Checklist\", windowOption);\n  });\n  // 세션을 삭제한다.\n  $(\".panel-group\").on(\"click\", \".btn-delete-session\", function(e) {\n    e.preventDefault();\n\n    if (!window.confirm(\"삭제 시 되돌릴 수 없습니다. 정말 삭제하시겠습니까?\")) {\n      return false;\n    }\n\n    var $self = $(this);\n    var params = {};\n    params.course_list_id = $(this)\n      .parent(\"span\")\n      .data(\"course-list-id\");\n    params.course_list_type = $(this)\n      .parent(\"span\")\n      .data(\"type\");\n\n    var courselistType = $(this)\n      .parent(\"span\")\n      .data(\"type\");\n    switch (courselistType) {\n    case \"QUIZ\":\n    case \"FINAL\":\n      params.quiz_group_id = $(this).data(\"quiz-group\");\n      break;\n    case \"VIDEO\":\n      params.video_id = $(this).data(\"video-id\");\n      break;\n    case \"CHECKLIST\":\n      params.checklist_group_id = $(this).data(\"checklist-group\");\n      break;\n    default:\n      break;\n    }\n\n    window.axios\n      .delete(\"/course/courselist\", {\n        params: params\n      })\n      .then(function(response) {\n        if (!response.data.success) {\n          window.alert(\"진행한 이력이 있어 세션을 삭제하지 못했습니다. 관리자에게 문의해주시기 바랍니다.\");\n        } else {\n          window.alert(\"세션을 삭제하였습니다.\");\n          $self.parents(\"li\").remove();\n        }\n      })\n      .catch(function(error) {\n        console.log(error);\n      });\n  });\n\n  // 세션 수정하기\n  $(\".panel-group\").on(\"click\", \".btn-modify-session\", function(e) {\n    e.preventDefault();\n\n    var dataCourseId = $(this)\n      .parent(\"span\")\n      .data(\"course-id\");\n    var dataCourseListId = $(this)\n      .parent(\"span\")\n      .data(\"course-list-id\");\n    var dataVideoId = $(this).data(\"video-id\");\n    var dataQuizGroupId = $(this).data(\"quiz-group\");\n    var dataChecklistGroupId = $(this).data(\"checklist-group\");\n    var dataType = $(this)\n      .parent(\"span\")\n      .data(\"type\"); // VIDEO/QUIZ/FINAL\n\n    if (dataType === \"VIDEO\") {\n      Util.createWindowPopup(\n        \"/course/modify/video?course_id=\" +\n          dataCourseId +\n          \"&course_list_id=\" +\n          dataCourseListId +\n          \"&video_id=\" +\n          dataVideoId,\n        \"Video\",\n        windowOption\n      );\n    } else if (dataType === \"QUIZ\" || dataType === \"FINAL\") {\n      Util.createWindowPopup(\n        \"/course/modify/quiz?course_id=\" +\n          dataCourseId +\n          \"&course_list_id=\" +\n          dataCourseListId +\n          \"&type=\" +\n          dataType +\n          \"&quiz_group_id=\" +\n          dataQuizGroupId,\n        \"Quiz\",\n        windowOption\n      );\n    } else if (dataType === \"CHECKLIST\") {\n      Util.createWindowPopup(\n        \"/course/modify/checklist?course_id=\" +\n          dataCourseId +\n          \"&course_list_id=\" +\n          dataCourseListId +\n          \"&type=\" +\n          dataType +\n          \"&checklist_group_id=\" +\n          dataChecklistGroupId,\n        \"Checklist\",\n        windowOption\n      );\n    }\n  });\n\n  // 체크리스트 보기\n  $(\".panel-group\").on(\"click\", \".btn-preview-checklist\", function(e) {\n    e.preventDefault();\n    var courseListId = window\n      .$(this)\n      .parent(\"span\")\n      .data(\"course-list-id\");\n    if (!courseListId) {\n      courseListId = window.$(this).data(\"id\");\n    }\n    Util.createWindowPopup(\"/course/checklist?course_list_id=\" + courseListId, \"Checklist\", windowOption);\n  });\n\n  // 퀴즈 풀어보기\n  $(\".panel-group\").on(\"click\", \".btn-solve-quiz\", function(e) {\n    e.preventDefault();\n\n    var quizGroupId = window.$(this).attr(\"data-quiz-group\");\n    var dataTitle = window.$(this).attr(\"data-title\");\n    var dataType = window.$(this).attr(\"data-type\");\n\n    Util.createWindowPopup(\n      \"/course/quiz?id=\" + quizGroupId + \"&title=\" + dataTitle + \"&type=\" + dataType,\n      \"Quiz\",\n      windowOption\n    );\n  });\n\n  // 비디오 보기\n  $(\".panel-group\").on(\"click\", \".btn-watch-video\", function(e) {\n    e.preventDefault();\n\n    // 비디오 아이디를 추출\n    var videoId = window.$(this).attr(\"data-video-id\");\n    Util.createWindowPopup(\"/course/video?id=\" + videoId, \"Video\", windowOption);\n  });\n\n  $(\".panel-group\").on(\"click\", \".btn-delete-course\", function() {\n    if (window.confirm(\"선택하신 강의를 삭제하시겠습니까?\")) {\n      var selectedCourseId = $(\".panel-group\").data(\"selected-course-id\");\n\n      window.axios\n        .delete(\"/course/deactivate\", {\n          params: {\n            id: selectedCourseId\n          }\n        })\n        .then(function(res) {\n          if (res.data.success) {\n            $(\".panel[data-id=\" + selectedCourseId + \"]\").remove();\n          }\n        })\n        .catch(function(error) {\n          console.log(error);\n        });\n    }\n  });\n\n  btnSendMessage.on(\"click\", function(e) {\n    e.preventDefault();\n\n    var currentTabId = $(\"ul.select-employee li.active\")\n      .children()\n      .attr(\"id\");\n    var checkedEmployeeIds;\n    switch (currentTabId) {\n    case \"employee\":\n      checkedEmployeeIds = window\n          .$(\n            \":checkbox:checked\",\n            tableEmployee\n              .rows\n              // {\n              //   filter: 'applied'\n              // }\n              ()\n              .nodes()\n          )\n          .map(function() {\n            return tableEmployee.row(window.$(this).parents(\"tr\")).data()[4];\n          })\n          .get()\n          .join(\",\");\n      break;\n    case \"employee-assigned\":\n        // checkedEmployeeIds = window.$(':checkbox:checked',\n        //   tableAssignedEmployee.rows({filter: 'applied'}).nodes()).map(\n        //     function () {\n        //       return tableAssignedEmployee.row(window.$(this).parents('tr')).data()['user_phone'];\n        //     }\n        //   ).get().join(',');\n      break;\n    default:\n      break;\n    }\n\n    if (!checkedEmployeeIds) {\n      window.alert(\"직원을 선택하세요.\");\n      return false;\n    }\n\n    var message = messageInput.val().trim();\n    if (message === \"\") {\n      window.alert(\"메세지를 입력하세요.\");\n      messageInput.focus();\n      return false;\n    }\n\n    if (!window.confirm(\"메세지를 보내시겠습니까?\")) {\n      return false;\n    }\n\n    window\n      .axios({\n        method: \"post\",\n        url: \"/api/v1/sms/send\",\n        data: {\n          phones: checkedEmployeeIds,\n          msg: message\n        }\n      })\n      .then(function(res) {\n        if (res.data.success === true) {\n          window.alert(\"메세지를 전송하였습니다.\");\n        } else {\n          window.alert(\"알 수 없는 오류가 발생했습니다. 잠시 후에 다시 시도해주세요.\");\n        }\n      });\n  });\n\n  messageInput.on(\"keyup\", function(e) {\n    var message = window.$(e.currentTarget).val();\n    var messageBytes = Util.getBytes(message);\n    var remain = 2000 - messageBytes;\n\n    // console.log(message);\n    // console.log(Util.getBytes(message));\n    // console.log(remain);\n\n    if (remain < 0) {\n      window.alert(\"2000 Bytes 를 초과할 수 없습니다.\");\n      // message = message.substring(0, 90);\n      message = Util.cutBytes(message, 2000);\n      window.$(e.currentTarget).val(message);\n      window.$(e.currentTarget).focus();\n      messageBytes = Util.getBytes(message);\n    }\n\n    window.$(\".remain-bytes\").html(messageBytes + \" / 2000 바이트\");\n  });\n});\n"],"sourceRoot":"/source/"}